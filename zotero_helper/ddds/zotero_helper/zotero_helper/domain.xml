<?xml version="1.0" encoding="utf-8"?>
<domain name="ZoteroHelperDomain" is_super_domain="true">

  <goal type="perform" action="top">
    <plan>
      <forget_all/>
      <findout type="goal"/>
    </plan>
  </goal>

  <!-- 01: User Query about items number p: items_num -->
  <!-- if the user did not specify item type or collection name we assume that
  the the user ask about the whole database -->
  <!-- <goal type="resolve" question_type="wh_question" predicate="count">
    <plan>
      <bind type="wh_question" predicate="type"/>
      <invoke_service_query predicate="count" type="wh_question"/>
    </plan>
    <postplan>
      <if>
        <condition>
          <proposition predicate="count" value="0"/>
        </condition>
        <then>
          <invoke_service_action name="ReportEmpty" postconfirm="true"/>
        </then>
        <else>
          <invoke_service_action name="ReportCount" postconfirm="true"/>
        </else>
      </if>
    </postplan>
  </goal> -->

  <goal type="resolve" question_type="wh_question" predicate="count">
    <plan>
      <!-- <invoke_service_query> does not return multiple variables        -->
      <!-- Need the system to utter "COUNT + TYPE(plural|singular)"         -->
      <!-- e.g. x paper(s), if you speak Arabic this will be a miss         -->
      <!-- predicate count has count+type(lural|singular), while count_only -->
      <!-- has the count only to use it in the if/then statement            -->
      <bind type="wh_question" predicate="type"/>
      <invoke_service_query predicate="count_type" type="wh_question"/>
      <invoke_service_query predicate="count_only" type="wh_question"/>
      <invoke_service_query predicate="check_type" type="wh_question"/>
      <if>
        <condition>
          <proposition predicate="count_only" value="0"/>
        </condition>
        <then>
          <invoke_service_action name="ReportEmpty" postconfirm="true"/>
          <signal_action_completion/>
        </then>
        <else>
          <invoke_service_action name="ReportCount" postconfirm="true"/>
          <signal_action_completion/>
        </else>
      </if>
    </plan>
  </goal>

  <parameters predicate="count">
    <background predicate="count_type"/>
    <background predicate="check_type"/>
  </parameters>

</domain>
